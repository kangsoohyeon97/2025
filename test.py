# app.py

import streamlit as st
import random
import time

# í˜ì´ì§€ ì„¤ì •
st.set_page_config(page_title="ì‹¬ë¦¬ í…ŒìŠ¤íŠ¸", layout="centered")

# ì„¸ì…˜ ì´ˆê¸°í™”
if 'submitted' not in st.session_state:
    st.session_state.submitted = False
if 'answers' not in st.session_state:
    st.session_state.answers = []

# ì ìˆ˜ ì´ˆê¸°í™”
scores = {
    "ë¶„ì„í˜•": 0,
    "ê°ì •í˜•": 0,
    "í˜¼ë€í˜•": 0,
    "í–‰ë™í˜•": 0
}

# ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸
questions = [
    {
        "question": "1. ëˆ„êµ°ê°€ ê³ ë¯¼ì„ ì´ì•¼ê¸°í•˜ë©´ ë‚˜ëŠ”?",
        "options": {
            "í•´ê²° ë°©ë²•ì„ ì œì‹œí•œë‹¤.": "ë¶„ì„í˜•",
            "ê°ì •ì— ê³µê°í•˜ê³  ìœ„ë¡œí•œë‹¤.": "ê°ì •í˜•",
            "ê´œíˆ ë¶ˆì•ˆí•´ì ¸ì„œ ê°™ì´ ê±±ì •í•œë‹¤.": "í˜¼ë€í˜•",
            "ì´ì•¼ê¸°ë¥¼ ë¹¨ë¦¬ ë„˜ê¸°ê³  ë‹¤ë¥¸ ê±¸ í•œë‹¤.": "í–‰ë™í˜•"
        }
    },
    {
        "question": "2. ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì¼ì • ë³€ê²½ì´ ìƒê¸°ë©´?",
        "options": {
            "ê³„íšì„ ë‹¤ì‹œ ì •ë¦¬í•œë‹¤.": "ë¶„ì„í˜•",
            "ìƒëŒ€ë°©ì˜ ì…ì¥ì„ ìƒê°í•œë‹¤.": "ê°ì •í˜•",
            "ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í¬ê²Œ ë°›ëŠ”ë‹¤.": "í˜¼ë€í˜•",
            "ê·¸ëƒ¥ ì ì‘í•œë‹¤. ë¬¸ì œì—†ë‹¤.": "í–‰ë™í˜•"
        }
    },
    {
        "question": "3. ë‚¯ì„  ì‚¬ëŒë“¤ê³¼ì˜ ëª¨ì„ì—ì„œëŠ”?",
        "options": {
            "ëŒ€í™”ë¥¼ ê´€ì°°í•˜ë©° ë¶„ì„í•œë‹¤.": "ë¶„ì„í˜•",
            "ê°ì •ì„ ë‚˜ëˆ„ë ¤ ë…¸ë ¥í•œë‹¤.": "ê°ì •í˜•",
            "ê¸´ì¥ë˜ê³  ë¶ˆí¸í•˜ë‹¤.": "í˜¼ë€í˜•",
            "ì¦ê¸°ë©° ì£¼ë„ì ìœ¼ë¡œ ë‚˜ì„ ë‹¤.": "í–‰ë™í˜•"
        }
    },
    {
        "question": "4. ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ì•˜ì„ ë•Œ ë‚˜ëŠ”?",
        "options": {
            "ì¡°ìš©íˆ ì •ë¦¬í•˜ê³  ìƒê°í•œë‹¤.": "ë¶„ì„í˜•",
            "ëˆ„êµ°ê°€ì—ê²Œ í„¸ì–´ë†“ëŠ”ë‹¤.": "ê°ì •í˜•",
            "ì˜ˆë¯¼í•´ì§€ê³  ê±±ì •ì´ ë§ì•„ì§„ë‹¤.": "í˜¼ë€í˜•",
            "ìš´ë™í•˜ê±°ë‚˜ ë­”ê°€ë¥¼ í•´ë²„ë¦°ë‹¤.": "í–‰ë™í˜•"
        }
    },
    {
        "question": "5. ê²°ì •ì„ ë‚´ë ¤ì•¼ í•  ë•Œ ë‚˜ëŠ”?",
        "options": {
            "ì´ìœ ì™€ ê·¼ê±°ë¥¼ ë”°ì§„ë‹¤.": "ë¶„ì„í˜•",
            "ê¸°ë¶„ê³¼ ê°ì •ì— ë”°ë¥¸ë‹¤.": "ê°ì •í˜•",
            "ë§ì„¤ì´ê³  ê±±ì •ì´ ì•ì„ ë‹¤.": "í˜¼ë€í˜•",
            "ê·¸ëƒ¥ ëŠë‚ŒëŒ€ë¡œ í–‰ë™í•œë‹¤.": "í–‰ë™í˜•"
        }
    },
]

st.title("ğŸ§  ë‹¹ì‹ ì˜ ì‹¬ë¦¬ ìœ í˜• í…ŒìŠ¤íŠ¸")

# ì§ˆë¬¸ ì¶œë ¥
for i, q in enumerate(questions):
    answer = st.radio(q["question"], list(q["options"].keys()), key=f"q{i}")
    st.session_state.answers.append(answer)

# ì œì¶œ ë²„íŠ¼
if st.button("ğŸ” ê²°ê³¼ ë³´ê¸°") and not st.session_state.submitted:
    st.session_state.submitted = True

    # ì ìˆ˜ ê³„ì‚°
    for i, q in enumerate(questions):
        user_answer = st.session_state.answers[i]
        category = q["options"][user_answer]
        scores[category] += 1

    result = max(scores, key=scores.get)

    st.subheader(f"ğŸ§¾ ë‹¹ì‹ ì˜ ì‹¬ë¦¬ ìœ í˜•: **{result}**")

    # ê²°ê³¼ë³„ ì„¤ëª… + ì¶”ì²œ
    if result == "ë¶„ì„í˜•":
        desc = "ğŸ¯ ë¶„ì„í˜• - ë…¼ë¦¬ì , ê³„íšì ì´ë©° ë¬¸ì œí•´ê²°ì„ ì¤‘ì‹œí•©ë‹ˆë‹¤."
        book = "ã€ë…¼ë¦¬ì˜ ê¸°ìˆ ã€"
        movie = "ã€Šì¸ì…‰ì…˜ã€‹"
    elif result == "ê°ì •í˜•":
        desc = "ğŸ’– ê°ì •í˜• - ê³µê°ê³¼ ê°ì„± ì¤‘ì‹¬, íƒ€ì¸ì˜ ê°ì •ì„ ì˜ ì´í•´í•©ë‹ˆë‹¤."
        book = "ã€ê°ì • ìˆ˜ì—…ã€"
        movie = "ã€Šì´í„°ë„ ì„ ìƒ¤ì¸ã€‹"
    elif result == "í˜¼ë€í˜•":
        desc = "ğŸŒ€ í˜¼ë€í˜• - ê±±ì •ì´ ë§ê³  ë¶ˆì•ˆì •í•˜ì§€ë§Œ ë‚´ë©´ì´ ê¹ŠìŠµë‹ˆë‹¤."
        book = "ã€ë‚˜ëŠ” ìƒê°ì´ ë„ˆë¬´ ë§ì•„ã€"
        movie = "ã€Šì¸ì‚¬ì´ë“œ ì•„ì›ƒã€‹"
    else:
        desc = "ğŸ”¥ í–‰ë™í˜• - ì¦‰í¥ì ì´ê³  ë„ì „ì ì¸ ìŠ¤íƒ€ì¼, ì—ë„ˆì§€ ë„˜ì¹©ë‹ˆë‹¤."
        book = "ã€ê¸°ì–µ ì „ë‹¬ìã€"
        movie = "ã€Ší¬ë ˆìŠ¤íŠ¸ ê²€í”„ã€‹"

    # ê²°ê³¼ ì¶œë ¥
    st.write(desc)
    st.markdown(f"**ğŸ“š ì¶”ì²œ ì±…:** {book}")
    st.markdown(f"**ğŸ¬ ì¶”ì²œ ì˜í™”:** {movie}")

    # ê³µìœ ìš© í…ìŠ¤íŠ¸
    st.text_area("ğŸ“¤ ê²°ê³¼ ê³µìœ  (ë³µì‚¬í•´ì„œ ì‚¬ìš©í•˜ì„¸ìš”)", f"ğŸ§  ë‚˜ì˜ ì‹¬ë¦¬ ìœ í˜•ì€ [{result}]!\n\n{desc}\n\nğŸ“š {book}\nğŸ¬ {movie}", height=150)

    # ìƒˆë¡œ ì‹œì‘ ë²„íŠ¼
    if st.button("ğŸ”„ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°"):
        for i in range(len(questions)):
            st.session_state[f"q{i}"] = None
        st.session_state.submitted = False
        st.session_state.answers = []
        st.experimental_rerun()
